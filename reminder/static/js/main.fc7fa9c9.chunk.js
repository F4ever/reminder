(this["webpackJsonpremind-manager"]=this["webpackJsonpremind-manager"]||[]).push([[0],{32:function(e,t,a){e.exports=a(47)},37:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(27),o=a.n(i),c=a(6),s=a(7),l=a(9),u=a(8),d=a(10),m=(a(37),a(19)),p=a(16),h=a(11),f=a.n(h),E=a(14),b=a(49),v=a(31);function y(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(e)}function g(e){return e.json()}function k(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}var O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"login",value:function(){var e=Object(E.a)(f.a.mark((function e(){var t,a,n,r,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.history,a=this.state,n=a.email,r=a.password,e.next=4,fetch("/auth-api/login/",{method:"POST",body:JSON.stringify({email:n,password:r}),headers:{"Content-Type":"application/json;charset=utf-8","X-CSRFToken":k("csrftoken")}});case 4:if(!((i=e.sent).status>=200&&i.status<300)){e.next=9;break}t.push("/"),e.next=13;break;case 9:return e.next=11,i.json();case 11:o=e.sent,window.alert(JSON.stringify(o));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.history,a=this.state,n=a.email,i=a.password;return r.a.createElement("div",{className:"Login"},r.a.createElement("b",null,"Login Form"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(b.a.Group,{controlId:"formBasicEmail"},r.a.createElement(b.a.Label,null,"Email address"),r.a.createElement(b.a.Control,{type:"email",placeholder:"Enter email",value:n,onChange:function(t){return e.setState({email:t.target.value})}})),r.a.createElement(b.a.Group,{controlId:"formBasicPassword"},r.a.createElement(b.a.Label,null,"Password"),r.a.createElement(b.a.Control,{type:"password",placeholder:"Password",value:i,onChange:function(t){return e.setState({password:t.target.value})}})),r.a.createElement(v.a,{variant:"primary",type:"submit",onClick:this.login.bind(this)},"Login"),r.a.createElement("div",{style:{margin:"10px"}},r.a.createElement("a",{style:{cursor:"pointer"},onClick:function(){return t.push("/register/")}},"Register")))}}]),t}(n.Component),j=Object(p.f)(O),C=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",username:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"register",value:function(){var e=Object(E.a)(f.a.mark((function e(){var t,a,n,r,i,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.history,a=this.state,n=a.email,r=a.password,i=a.username,e.next=4,fetch("/api-auth/register/",{method:"POST",body:JSON.stringify({email:n,password:r,username:i}),headers:{"Content-Type":"application/json;charset=utf-8","X-CSRFToken":k("csrftoken")}});case 4:if(!((o=e.sent).status>=200&&o.status<300)){e.next=9;break}t.push("/"),e.next=13;break;case 9:return e.next=11,o.json();case 11:c=e.sent,window.alert(JSON.stringify(c));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.history,a=this.state,n=a.email,i=a.password,o=a.username;return r.a.createElement("div",{className:"Login"},r.a.createElement("b",null,"Register Form"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(b.a.Group,{controlId:"formBasicEmail"},r.a.createElement(b.a.Label,null,"Email address"),r.a.createElement(b.a.Control,{type:"email",placeholder:"Enter email",value:n,onChange:function(t){return e.setState({email:t.target.value})}})),r.a.createElement(b.a.Group,{controlId:"formBasicPassword"},r.a.createElement(b.a.Label,null,"Password"),r.a.createElement(b.a.Control,{type:"password",placeholder:"Password",value:i,onChange:function(t){return e.setState({password:t.target.value})}})),r.a.createElement(b.a.Group,{controlId:"formBasicEmail"},r.a.createElement(b.a.Label,null,"Name"),r.a.createElement(b.a.Control,{placeholder:"Enter nickname",value:o,onChange:function(t){return e.setState({username:t.target.value})}})),r.a.createElement(v.a,{variant:"primary",type:"submit",onClick:this.register.bind(this)},"Register"),r.a.createElement("div",{style:{margin:"10px"}},r.a.createElement("a",{style:{cursor:"pointer"},onClick:function(){return t.push("/login/")}},"Login")))}}]),t}(n.Component),w=Object(p.f)(C),S=a(17),x=a(48),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).checkUser=a.checkUser.bind(Object(S.a)(a)),a.state={users:[],userSelectedIds:e.users},fetch("/api/v1/users/").then(g).then((function(e){return a.setState({users:e.results})})),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"checkUser",value:function(e){var t=this.state.userSelectedIds,a=t.slice(),n=t.indexOf(e);n>-1?a.splice(n,1):a.push(e),this.props.change(a),this.setState({userSelectedIds:a})}},{key:"render",value:function(){var e=this,t=this.state,a=t.users,n=t.userSelectedIds;return r.a.createElement("div",null,"Select Users",r.a.createElement("div",null,a.map((function(t){return r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"},key:t.id},r.a.createElement(x.a.Checkbox,{checked:-1!==n.indexOf(t.id),onClick:function(){return e.checkUser(t.id)}}),r.a.createElement("div",null,t.username),r.a.createElement("div",null,t.email))}))))}}]),t}(n.Component),P=function(e){function t(e){var a;Object(c.a)(this,t);var n=(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).props.notification;return a.state=n?{id:n.id,head:n.head,body:n.body,place:n.place,date:n.date,participators:n.participators}:{id:null,head:"",body:"",place:"",date:"",participators:[]},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"saveAndClose",value:function(){var e=Object(E.a)(f.a.mark((function e(){var t,a,n,r,i,o,c,s,l,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.close,a=this.state,n=a.id,r=a.head,i=a.body,o=a.place,c=a.date,s=a.participators,e.next=4,fetch("/api/v1/notifications/".concat(n?n+"/":""),{method:n?"PATCH":"POST",body:JSON.stringify({head:r,body:i,place:o,date:c,participators:s}),headers:{"Content-Type":"application/json;charset=utf-8","X-CSRFToken":k("csrftoken")}});case 4:if(!((l=e.sent).status>=200&&l.status<300)){e.next=9;break}t(),e.next=13;break;case 9:return e.next=11,l.json();case 11:u=e.sent,window.alert(JSON.stringify(u));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"choose",value:function(e){this.setState({participators:e})}},{key:"render",value:function(){var e=this,t=this.props.close,a=this.state,n=a.head,i=a.body,o=a.place,c=a.date,s=a.participators;return r.a.createElement("div",{className:"popup"},r.a.createElement(b.a.Group,{controlId:"formBasicEmail"},r.a.createElement(b.a.Label,null,"Head"),r.a.createElement(b.a.Control,{placeholder:"Head",value:n,onChange:function(t){return e.setState({head:t.target.value})}})),r.a.createElement(b.a.Group,{controlId:"formBasicEmail"},r.a.createElement(b.a.Label,null,"Body"),r.a.createElement(b.a.Control,{placeholder:"Body",value:i,onChange:function(t){return e.setState({body:t.target.value})}})),r.a.createElement(b.a.Group,{controlId:"formBasicEmail"},r.a.createElement(b.a.Label,null,"Place"),r.a.createElement(b.a.Control,{placeholder:"Place",value:o,onChange:function(t){return e.setState({place:t.target.value})}})),r.a.createElement(b.a.Group,{controlId:"formBasicEmail"},r.a.createElement(b.a.Label,null,"Date YYYY-MM-DDTHH:MM",r.a.createElement("br",null),"(example 2019-11-25T13:33)"),r.a.createElement(b.a.Control,{placeholder:"DateTime",value:c,onChange:function(t){return e.setState({date:t.target.value})}})),r.a.createElement("br",null),r.a.createElement(N,{users:s,change:function(t){return e.choose(t)}}),r.a.createElement("br",null),r.a.createElement(v.a,{onClick:function(){return t()}},"Close"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(v.a,{onClick:function(){return e.saveAndClose()}},"Save"))}}]),t}(n.Component),T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={notifications:[],addNotification:!1,notification:{}},a.getNotifications=a.getNotifications.bind(Object(S.a)(a)),a.getNotifications(),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"notificationPopup",value:function(e){this.setState({notification:e,addNotification:!0})}},{key:"closePopup",value:function(){this.setState({addNotification:!1}),this.getNotifications()}},{key:"getNotifications",value:function(){var e=this,t=this.props.history;console.log("asd"),fetch("/api/v1/notifications/").then(y).then(g).then((function(t){return e.setState({notifications:t.results})})).catch((function(){return t.push("/login/")}))}},{key:"delete",value:function(){var e=Object(E.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/notifications/".concat(t,"/"),{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8","X-CSRFToken":k("csrftoken")}});case 2:if(!((a=e.sent).status>=200&&a.status<300)){e.next=7;break}this.getNotifications(),e.next=11;break;case 7:return e.next=9,a.json();case 9:n=e.sent,window.alert(JSON.stringify(n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"edit",value:function(e){this.setState({notification:e,addNotification:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.notifications,n=t.addNotification,i=t.notification;return r.a.createElement("div",{className:"notify-table"},r.a.createElement(v.a,{variant:"primary",style:{margin:"30px"},onClick:function(){return e.notificationPopup(null)}},"Add notification"),r.a.createElement("table",{style:{width:"800px"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"head"),r.a.createElement("td",null,"body"),r.a.createElement("td",null,"date"),r.a.createElement("td",null,"edit"),r.a.createElement("td",null,"delete"))),r.a.createElement("tbody",null,a.map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",null,t.head),r.a.createElement("td",null,t.body),r.a.createElement("td",null,t.date),r.a.createElement("td",{onClick:function(){return e.edit(t)},style:{cursor:"pointer"}},"Edit"),r.a.createElement("td",{onClick:function(){return e.delete(t.id)},style:{cursor:"pointer"}},"Delete"))})))),n&&r.a.createElement(P,{notification:i,close:this.closePopup.bind(this)}))}}]),t}(n.Component),I=Object(p.f)(T),L=(a(46),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(m.a,null,r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:I}),r.a.createElement(p.a,{exact:!0,path:"/login/",component:j}),r.a.createElement(p.a,{exact:!0,path:"/register/",component:w}))))}}]),t}(n.Component));o.a.render(r.a.createElement(L,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.fc7fa9c9.chunk.js.map